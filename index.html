<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infinity Audiobook | AI-Powered Collective Knowledge</title>
    <style>
        :root {
            --primary: #00d2ff;
            --bg: #0a0a0c;
            --card: #16161a;
            --text-main: #eeeeee;
            --text-dim: #888888;
            --accent: #ff4d4d;
        }

        body {
            background-color: var(--bg);
            color: var(--text-main);
            font-family: 'Inter', -apple-system, sans-serif;
            margin: 0; padding: 40px 20px;
        }

        .header { text-align: center; margin-bottom: 50px; }
        .header h1 { color: var(--primary); letter-spacing: 2px; margin-bottom: 10px; }

        .container {
            max-width: 1200px; margin: 0 auto;
            display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 25px; padding: 20px;
        }

        .book-card {
            background: var(--card); border: 1px solid #2a2a2a; border-radius: 18px;
            display: flex; padding: 20px; transition: 0.3s ease; position: relative;
        }
        .book-card:hover { transform: translateY(-5px); border-color: var(--primary); }

        @keyframes pulse-glow {
            0% { box-shadow: 0 0 0px var(--primary); border-color: var(--primary); }
            50% { box-shadow: 0 0 20px var(--primary); border-color: #fff; }
            100% { box-shadow: 0 0 0px var(--primary); border-color: #2a2a2a; }
        }
        .boosting { animation: pulse-glow 0.8s ease-in-out; }

        .cover { width: 100px; height: 150px; border-radius: 8px; object-fit: cover; margin-right: 20px; }
        .book-info { flex: 1; display: flex; flex-direction: column; justify-content: space-between; }
        .badge { font-size: 0.65rem; font-weight: bold; color: var(--primary); text-transform: uppercase; margin-bottom: 8px; }
        h3 { font-size: 1.1rem; margin: 0 0 12px 0; line-height: 1.3; }

        .progress-wrapper { background: #222; height: 10px; border-radius: 5px; overflow: hidden; margin-bottom: 8px; }
        .progress-bar { background: linear-gradient(90deg, #00d2ff, #3a7bd5); height: 100%; width: 0%; transition: width 1s ease; }
        .stats { display: flex; justify-content: space-between; font-size: 0.8rem; color: var(--text-dim); margin-bottom: 18px; }

        .actions { display: flex; gap: 10px; }
        .btn { flex: 1; border: none; padding: 10px; border-radius: 8px; font-weight: bold; cursor: pointer; font-size: 0.85rem; transition: 0.2s; text-align: center; }
        .btn-support { background: var(--primary); color: #000; }
        .btn-support:disabled { background: #444; cursor: not-allowed; }
        .btn-boost { background: transparent; border: 1px solid #444; color: var(--text-dim); }

        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); display: none; justify-content: center; align-items: center; z-index: 1000;
        }
        .modal-content {
            background: #16161a; border: 1px solid #333; padding: 30px; border-radius: 20px;
            max-width: 450px; width: 90%; position: relative;
        }

        .info-section { background: rgba(255,255,255,0.03); padding: 15px; border-radius: 12px; margin: 15px 0; border-left: 4px solid var(--primary); }
        .info-section h4 { margin: 0 0 5px 0; font-size: 0.85rem; color: var(--primary); }
        .info-section p { margin: 0; font-size: 0.75rem; color: #aaa; line-height: 1.4; }

        /* Âº∫Âà∂ÈòÖËØªÂçèËÆÆÊ†∑Âºè */
        .tos-agreement { margin: 15px 0; font-size: 0.75rem; color: #888; display: flex; align-items: flex-start; gap: 8px; }
        .tos-agreement a { color: var(--primary); text-decoration: none; }
        .tos-agreement input { margin-top: 2px; }

        .loader {
            width: 40px; height: 40px; border: 3px solid #333; border-bottom-color: var(--primary);
            border-radius: 50%; display: inline-block; animation: rotation 1s linear infinite;
        }
        @keyframes rotation { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        .footer-disclaimer { margin-top: 60px; text-align: center; font-size: 0.7rem; color: #444; border-top: 1px solid #222; padding-top: 20px; }
    </style>
</head>
<body>
    <div class="header">
        <h1>INFINITY AUDIOBOOK</h1>
        <p style="color: #666;">AI-Powered Collective Knowledge Initiative</p>
    </div>
    <div class="container" id="book-container"></div>

    <div id="paymentModal" class="modal-overlay">
        <div class="modal-content">
            <div id="step-confirm">
                <h3 style="color: var(--primary); margin-top: 0;">Service Confirmation</h3>
                <div class="info-section" style="border-left-color: #eee;">
                    <p><strong>Project:</strong> <span id="modalBookTitle"></span></p>
                    <p><strong>Service Fee:</strong> $0.99 (Digital Support Credits)</p>
                </div>
                <div class="info-section">
                    <h4>Why is it so affordable? / ‰∏∫‰ªÄ‰πà‰ºòÊÉ†Ôºü</h4>
                    <p>We use AI technology to share the costs of format conversion and technical coordination across our community supporters.</p>
                </div>
                <div class="info-section" style="background: rgba(0,210,255,0.1);">
                    <h4>üöÄ Early Access Reward / ÊèêÂâçËß£ÈîÅÂ•ñÂä±</h4>
                    <p>Receive **instant access** via email immediately after your contribution. No need to wait for the goal!</p>
                </div>

                <div class="tos-agreement">
                    <input type="checkbox" id="tos-check" onchange="toggleSupportBtn()">
                    <label for="tos-check">
                        By clicking Join, I agree to the <a href="/terms" target="_blank">Terms of Service</a> and understand the nature of this collaborative technical project.
                    </label>
                </div>

                <button id="final-support-btn" class="btn btn-support" style="width: 100%; margin-top: 10px; padding: 15px;" onclick="startSecureTransition()" disabled>
                    Secure Checkout (üîí 100% SSL)
                </button>
                <p style="text-align: center; font-size: 0.7rem; color: #444; margin-top: 12px; cursor: pointer;" onclick="closeModal()">Cancel</p>
            </div>
            <div id="step-loading" style="display:none; text-align: center; padding: 40px 0;">
                <div class="loader"></div>
                <div id="loader-text" style="margin-top: 20px; font-weight: bold; color: var(--primary);">Securing your technical service spot...</div>
                <div style="font-size: 0.7rem; color: #444; margin-top: 10px;">Establishing encrypted connection...</div>
            </div>
        </div>
    </div>

    <div class="footer-disclaimer">
        <p>Disclaimer: This is a cost-sharing technical service platform. We respect intellectual property.</p>
        <p>Contact: <span style="color:var(--primary)">legal@your-real-email.com</span> (Replace with your actual email)</p>
    </div>

    <script>
        const books = [
            { id: 'elon_musk', title: 'Elon Musk', progress: 34, target: 50, img: 'https://via.placeholder.com/100x150?text=Elon' },
            { id: 'steve_jobs', title: 'Steve Jobs', progress: 22, target: 50, img: 'https://via.placeholder.com/100x150?text=Steve' },
            { id: 'naval', title: 'Naval Almanack', progress: 45, target: 50, img: 'https://via.placeholder.com/100x150?text=Naval' }
        ];

        const container = document.getElementById('book-container');
        let currentBookId = '';

        function render() {
            container.innerHTML = '';
            books.forEach(book => {
                const percent = ((book.progress / book.target) * 100).toFixed(1);
                container.innerHTML += `
                    <div class="book-card" id="card-${book.id}">
                        <img src="${book.img}" class="cover">
                        <div class="book-info">
                            <div class="badge">Technical Coordination Active</div>
                            <h3>${book.title}</h3>
                            <div class="progress-wrapper">
                                <div class="progress-bar" id="bar-${book.id}" style="width: ${percent}%"></div>
                            </div>
                            <div class="stats">
                                <span><b id="txt-${book.id}">${percent}%</b> Complete</span>
                                <span>Target: ${book.target}</span>
                            </div>
                            <div class="actions">
                                <button class="btn btn-support" onclick="handlePayClick('${book.id}', '${book.title}')">Support $0.99</button>
                                <button class="btn btn-boost" onclick="handleBoost('${book.id}', '${book.title}')">üöÄ Boost</button>
                            </div>
                        </div>
                    </div>
                `;
            });
        }

        function handlePayClick(id, title) {
            currentBookId = id;
            document.getElementById('modalBookTitle').innerText = title;
            document.getElementById('tos-check').checked = false;
            document.getElementById('final-support-btn').disabled = true;
            document.getElementById('step-confirm').style.display = 'block';
            document.getElementById('step-loading').style.display = 'none';
            document.getElementById('paymentModal').style.display = 'flex';
        }

        function toggleSupportBtn() {
            const isChecked = document.getElementById('tos-check').checked;
            document.getElementById('final-support-btn').disabled = !isChecked;
        }

        function startSecureTransition() {
            document.getElementById('step-confirm').style.display = 'none';
            document.getElementById('step-loading').style.display = 'block';
            setTimeout(() => { document.getElementById('loader-text').innerText = "Verifying service credits..."; }, 800);
            // ËøôÈáåÊõøÊç¢‰∏∫ÊÇ®Âú® Make.com ËÆæÁΩÆÁöÑÊîØ‰ªòË∑≥ËΩ¨ÈìæÊé•
            setTimeout(() => { window.location.href = "https://your-payment-link.com?ref=" + currentBookId; }, 1600);
        }

        function handleBoost(id, title) {
            const card = document.getElementById('card-' + id);
            card.classList.remove('boosting');
            void card.offsetWidth; 
            card.classList.add('boosting');

            const bar = document.getElementById('bar-' + id);
            const txt = document.getElementById('txt-' + id);
            let cur = parseFloat(bar.style.width);
            if (cur < 99.5) {
                const newProgress = (cur + 0.5).toFixed(1);
                bar.style.width = newProgress + '%';
                txt.innerText = newProgress + '%';
            }

            const boostLink = window.location.origin + "/index.html?ref=" + id + "&src=boost";
            const msg = "üî• Awesome! You contributed to " + title + "!\\n\\nShare your unique boost link to help the community reach the goal faster:\\n" + boostLink;
            
            if (navigator.share) {
                navigator.share({ title: 'Infinity Audiobook', text: msg, url: boostLink });
            } else {
                if (confirm(msg + "\\n\\nClick OK to copy boost link.")) {
                    navigator.clipboard.writeText(boostLink);
                    alert("Boost link copied! Thank you for your support! üöÄ");
                }
            }
        }

        function closeModal() { document.getElementById('paymentModal').style.display = 'none'; }
        window.onclick = (e) => { if(e.target.className == 'modal-overlay') closeModal(); }
        
        render();
    </script>
</body>
</html>